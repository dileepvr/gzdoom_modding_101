<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<meta name="author" content="Dileep V. Reddy">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css" type="text/css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tufte-css/1.8.0/tufte.css" type="text/css" />
<style type="text/css">
input[type='checkbox']{display: none;}
.spoiler{background-color: gray; color: transparent; user-select: none; display: inline;}
input[id^='redacted']:checked + .spoiler{background-color: inherit; color: inherit; transition: 0.5s; border: solid 1px;}
#table-of-contents {font-size: 1.5em;position: fixed;right: 0em;top: 0em;background: #fffff8;box-shadow: 0 0 1em #777777;
-webkit-box-shadow: 0 0 1em #777777;-moz-box-shadow: 0 0 1em #777777;border-bottom-radius-left: 5px;-webkit-border-bottom-left-radius: 5px;
-moz-border-radius-bottomleft: 5px;text-align: right;max-height: 80%;overflow: auto;z-index: 100;}
#table-of-contents h2 {font-size: 1em;max-width: 10em;font-weight: normal;padding-left: 0.5em;padding-right: 0.5em;padding-top: 0.05em;padding-bottom: 0.05em;z-index: 100;}
#table-of-contents #text-table-of-contents {display: none;text-align: left;}
 #table-of-contents:hover #text-table-of-contents {display: block;padding: 0.5em;margin-top: -1.5em;z-index: 100;}
#table-of-contents #text-table-of-contents li {margin-top: 0.5em;}
#table-of-contents #text-table-of-contents li a {margin-right: 0.5em;font-weight: bold;text-decoration: none;}
$monospace: et-book-ligatures, monospace;$code-size: 80%;$smaller: 90%;$max-width: 710px;
caption{margin-bottom: 0.3em;}figcaption{margin-top: 0.3em;}
details{font-size: 1.4rem;}summary:hover {font-weight: bold;}
#bibliography {font-size: $smaller;}#bibliography table {width: 100%;}
html::-webkit-scrollbar{display: inherit;}html{-ms-overflow-style: inherit;scrollbar-width: inherit;}
blockquote {font-style: italic;}div.epigraph{margin: 0 !important;}div.epigraph > blockquote{margin-top: 0 !important;margin-bottom: 0 !important;}
sup,sub{vertical-align: baseline;position: relative;top: -0.4em;}sub{top: 0.4em;}
div.figure {padding: 0;border: 0;font-size: 100%;font: inherit;vertical-align: baseline;width: 100%;-webkit-margin-start: 0;-webkit-margin-end: 0;margin: 0 0 3em 0;}
div.figure > p > video{max-width: 55%;}div.figure > p > video.fullwidth{max-width: 90%;}
div.figure > p.caption{float: right;clear: right;margin-top: 0;margin-bottom: 0;font-size: 1.1rem;line-height: 1.6;vertical-align: baseline;position: relative;width: calc(55% / 2);margin-right: 12%;}
div.figure > p:nth-child(2){float: right;clear: right;margin-top: 0;margin-bottom: 0;font-size: 1.1rem;line-height: 1.6;vertical-align: baseline;position: relative;max-width: 80%;}
.figure-number {display: none;}a:link{text-decoration: underline;background: none;text-shadow: none;}
input#lightswitch{width: 2em;height: 1.5em;padding-left: 0.5em;}label#lightswitch-label{cursor: pointer;padding-left: 0.5em;font-size: 1.5em;}
body{margin: 0;max-width: 100%;padding: 0;width: 100%;}
h1{font-weight: 400;margin-top: 4rem;margin-bottom: 1.5rem;font-size: 3.2rem;line-height: 1;}
h2{font-style: italic;font-weight: 400;margin-top: 2.1rem;margin-bottom: 1.4rem;font-size: 2.8rem;line-height: 1;}
h3{font-style: italic;font-weight: 400;font-size: 2.2rem;margin-top: 2rem;margin-bottom: 1.4rem;line-height: 1;}
h4{font-style: italic;font-weight: 400;font-size: 1.8rem;margin-top: 2rem;margin-bottom: 1.4rem;line-height: 1;text-decoration: underline;}
pre code{font-size: 1.1em;padding: 0pt;overflow: auto;margin: 2em;position: relative;padding-top: 0.2em;padding-left: 1em;padding-right: 1em;border: 1px solid black;}
div#body{min-height: calc(100vh - 4em);padding-bottom: 2em;padding-top: 2em;overflow-y: auto;}
div#container{margin-left: auto;margin-right: auto;max-width: 1400px;padding-left: 12.5%;width: 87.5%;}article{padding-top: 0;}
@media (max-width: 760px){body{width: 100%;margin: 0;padding: 0;}div#body{width: 92%;padding-right: 8%;}}
:root{--dark-bg: #002b36;--dark-bg2: #224d57;--dark-color: #eee8d5;--dark-code: #b5c3c3;--light-bg: #fffff8;--light-bg2: #ccccc5;--light-color: #111;--light-code: #435961;}
@media (prefers-color-scheme: dark){div#body{background-color: var(--dark-bg);color: var(--dark-color);}
#table-of-contents{background: var(--dark-bg);}input#lightswitch:checked ~ div#body {background-color: var(--light-bg);color: var(--light-color);}
input#lightswitch:checked ~ #body #container #content #table-of-contents{background: var(--light-bg);}input#lightswitch:checked + label {font-weight: bold;}
pre code{color: var(--dark-code);background-color: var(--dark-bg2);}input#lightswitch:checked ~ #body #container #content pre code {color: var(--light-code);background-color: var(--light-bg2);}
table{border-color: var(--dark-fg);}input#lightswitch:checked ~ table{border-color: var(--light-code);}}
@media (prefers-color-scheme: light){div#body{background-color: var(--light-bg);color: var(--light-color);}
#table-of-contents{background: var(--light-bg);}input#lightswitch:checked ~ div#body{background-color: var(--dark-bg);color: var(--dark-color);}
input#lightswitch:checked ~ #body #container #content #table-of-contents{background: var(--dark-bg);}input#lightswitch:checked + label{font-weight: bold;}
pre code{color: var(--light-code);background-color: var(--light-bg2);}
input#lightswitch:checked ~ #body #container #content pre code{color: var(--dark-code);background-color: var(--dark-bg2);}
table{border-color: var(--light-fg);}input#lightswitch:checked ~ table{border-color: var(--dark-code);}}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js" integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script></head>
<input id="lightswitch" type="checkbox" class="lightswitch">
<label id="lightswitch-label" for="lightswitch">Switch Color Mode</label>
<body>
<div id="body"><div id="container"><div id="content"><article><h1 class="title">Getting Started with GZDoom Modding</h1>
<nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org8e4add5">Running GZDoom and understanding WADs</a>
<ul>
<li><a href="#orgb3b0163">Getting the Engine</a></li>
<li><a href="#orgcdd4733">Getting some IWADs</a></li>
</ul>
</li>
<li><a href="#org595e818">Basic replacement mods</a>
<ul>
<li><a href="#org8885e3e">Texture replacement</a></li>
<li><a href="#orgbe957ed">Text files as lumps</a></li>
<li><a href="#org1e33095">Basics of SLADE</a></li>
<li><a href="#org5493de0">Sprite replacement and offsets</a></li>
</ul>
</li>
<li><a href="#orgaf2e5ea">Zscript class replacements</a>
<ul>
<li><a href="#org101e012">New pickup item</a></li>
<li><a href="#orgf501179">Modifying Zombieman</a></li>
<li><a href="#org0d5e7e5">Modifying weapon</a></li>
</ul>
</li>
<li><a href="#org175ee48">Basics of mapping</a>
<ul>
<li><a href="#org6b05684">Getting UDB</a></li>
<li><a href="#orgc4274f4">The Mapfile lump</a></li>
</ul>
</li>
<li><a href="#org76b2151">Misc.</a>
<ul>
<li><a href="#orge8f5102">Git and version control</a></li>
<li><a href="#orgc5a1c0e">Seeking help and forum/discord etiquette</a></li>
<li><a href="#org1c0f69b">Studying famous mods</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<section><p>
If you are reading this on the github repo, try <a href="https://dileepvr.github.io/gzdoom_modding_101">this link</a> for some
<code>HTML</code> styling. Then use the floating element labeled &ldquo;<i>Table of
Contents</i>&rdquo; to the top-right of this page to navigate between
sections. Click on the &ldquo;Switch Color Mode&rdquo; text at the top-left of the
page to switch between <i>light</i> and <i>dark</i> modes.
</p>

<p>
This guide will introduce the basics of modding for the GZDoom source port.
It is aimed at beginners with little-to-no technical knowledge. For more
advanced help, check the <a href="https://zdoom.org/wiki/Tutorials">Tutorials page</a> on the zdoom wiki, or Jekyll Grim&rsquo;s
<a href="https://jekyllgrim.github.io/ZScript_Basics/">Zscript basics</a>. The guide will focus on GZDoom, but might have limited
applicability to other source ports. It is structured as a sequence of
exercises that the reader is expected to follow along. It presents
particular ways of doing things in particular chapters for pedagogical
reasons and to inculcate good habits. It will not present the full context
or historical information for everything, because it is meant to be a
first-pass curriculum, where too much extraneous information can be
overwhelming and counter-productive. You can recommend additions/changes to
this guide by submitting PRs to the <a href="https://github.com/dileepvr/gzdoom_modding_101">github repo</a>. Please only make changes
to the <code>index.org</code> file. Do not edit the <code>html</code> file directly.
</p>
</section>

<div id="outline-container-org8e4add5" class="outline-2">
<h2 id="org8e4add5">Running GZDoom and understanding WADs</h2>
<div class="outline-text-2" id="text-org8e4add5">
</div>
<div id="outline-container-orgb3b0163" class="outline-3">
<h3 id="orgb3b0163">Getting the Engine</h3>
<section><p>
First, let us get GZDoom running and playing a game. Download the
latest version of GZDoom (and not ZDoom) for your operating system
from here: <a href="https://zdoom.org/downloads">https://zdoom.org/downloads</a>
</p>

<p>
If you are running on Linux, you might be better off <a href="https://zdoom.org/wiki/Compile_GZDoom_on_Linux">compiling it from
source</a>. That is not a ding. I do this myself.
</p>


<p>
After downloading and unpacking, you should end up with a folder
somewhere on your computer with files named:
</p>
<ul class="org-ul">
<li><code>gzdoom.exe</code> (or just <code>gzdoom</code>)</li>
<li><code>gzdoom.pk3</code></li>
<li><code>lights.pk3</code></li>
<li><code>brightmaps.pk3</code></li>
<li><code>game_support.pk3</code></li>
<li><code>game_widescreen_gfx.pk3</code></li>
<li><code>fm_banks</code> (folder)</li>
<li><code>soundfonts</code> (folder)</li>
</ul>

<p>
Depending on the OS you downloaded for, you might have some extra
files like <code>*.dll</code> files. If you try to run the executable file
(<code>gzdoom.exe</code>) by either double-clicking on it, or running the command
from a terminal/command-prompt from that folder location, it should
throw up a message saying that it couldn&rsquo;t find any IWADs.
</p>

<p>
To run as a command, open a terminal (Linux) or command prompt
(Windows), and navigate to the directory location using the
change-directory (<code>cd</code>) command. When there, list the files using the
<code>ls</code> (Linux) or <code>dir</code> (Windows) command. It should print out all the
files from the above list. Then from there, just type <code>./gzdoom</code>
(Linux) or <code>gzdoom.exe</code> (Windows). This has the same effect as
double-clicking the file from your graphical file browser. Keep the
terminal/command-prompt open (minimize it for now). We won&rsquo;t be using
the command method everytime but it helps understand what is happening
under the hood.
</p>
</section>
</div>

<div id="outline-container-orgcdd4733" class="outline-3">
<h3 id="orgcdd4733">Getting some IWADs</h3>
<section><p>
Running the engine executable by itself couldn&rsquo;t run a game because
you haven&rsquo;t downloaded any actual games for the engine to run. Let us
fix that. For this guide, we will be using Freedoom, but you could
follow the same steps with Doom 1 and Doom 2 if you have purchased
those wad files from you favorite legal videogame store.
</p>

<p>
Acquire the files <code>freedoom1.wad</code> and <code>freedoom2.wad</code> from
<a href="https://freedoom.github.io/download.html">https://freedoom.github.io/download.html</a> (click on the <code>Freedoom:
Phase 1+2</code> hyperlink). Or better yet, get version 0.13.0 specifically
<a href="https://github.com/freedoom/freedoom/releases/tag/v0.13.0">from here</a>, since that is the one this guide will be using. Extract
these two <code>*.wad</code> files from the zip archive and place them in the
same directory as your GZDoom executable. If you are having trouble
opening a zip archive file, double-click or right-click on it and
&ldquo;extract&rdquo; the contents. On the Linux terminal, a tool like <code>unzip</code> can
also be used. With the files placed at the same location as your
GZDoom executable, running GZDoom again should cause the program to
auto-detect <code>freedoom1.wad</code> and <code>freedoom2.wad</code> and list them for
selection on startup.
</p>

<p>
Let&rsquo;s run Freedoom2 from the command line. From the
terminal/command-prompt, run the following command:
</p>

<ul class="org-ul">
<li>Windows</li>
</ul>
<pre class="code"><code>gzdoom.exe -iwad freedoom2.wad
</code></pre>
<ul class="org-ul">
<li>Linux</li>
</ul>
<pre class="code"><code>./gzdoom -iwad freedoom2.wad
</code></pre>

<p>
The game should launch, and you should be greeted with these starting
screens of main menu, and the first level:
</p>


<figure id="orgc6a2b1a">
<img src="./images/screenshot01.jpg" alt="screenshot01.jpg" width="800px">

<figcaption><span class="figure-number">Figure 1: </span>Main menu screen for Freedoom 2 (v0.13.0)</figcaption>
</figure>


<figure id="orgaa56762">
<img src="./images/screenshot02.jpg" alt="screenshot02.jpg" width="800px">

<figcaption><span class="figure-number">Figure 2: </span>Starting area of MAP01 in Freedoom 2 (v0.13.0)</figcaption>
</figure>

<p>
These screenshots are from running version 0.13.0 of
<code>freedoom2.wad</code>. Another version might look slightly different.
</p>

<p>
The files <code>freedoom.wad</code> and <code>freedoom2.wad</code> are called IWADs, which
is short for <a href="https://zdoom.org/wiki/IWAD">internal WADs</a>. These are wad-files that have all the
information within them for the engine to run a whole game. Later on,
we will take a look into what is actually inside them by using another
program.
</p>
</section>
</div>
</div>

<div id="outline-container-org595e818" class="outline-2">
<h2 id="org595e818">Basic replacement mods</h2>
<div class="outline-text-2" id="text-org595e818">
</div>
<div id="outline-container-org8885e3e" class="outline-3">
<h3 id="org8885e3e">Texture replacement</h3>
<section><p>
Now we are going to make our first mod. Create a project folder
somewhere on your computer. Call it something like
&ldquo;<code>my_first_mod</code>&rdquo;. Inside of it, create a folder named
&ldquo;<code>textures</code>&rdquo;. The name of this folder is important. It has to be spelt
exactly and cannot be arbitrary. Now, right click the following image
file and save it inside the &ldquo;<code>textures</code>&rdquo; folder. Make sure that it is
named <code>AQRUST08.png</code>. The filename is important.
</p>


<figure id="org821156f">
<img src="./images/AQRUST08.png" alt="AQRUST08.png">

<figcaption><span class="figure-number">Figure 3: </span><code>AQRUST08.png</code> modified wall texture</figcaption>
</figure>

<p>
Now, zip the <code>textures</code> folder into a zip-archive file called
something like <code>my_first_mod.zip</code>. The filename of this zip archive is
not important and can be anything of your choosing. You can
right-click the folder and compress it into a zip file. On Linux, you
can run this command from the location of your project folder:
</p>

<pre class="code"><code>zip -r my_first_mod.zip textures/
</code></pre>

<p>
This uses the <code>zip</code> program with the <code>-r</code> recursive flag to make sure
that contents of subfolders end up inside the zip
file. Congratulations. As far is the current version of GZDoom (4.14.0
as of this writing) is concerned, you just made your first mod. Now
let&rsquo;s run it. You can do this either by dragging and dropping the zip
file onto your <code>gzdoom.exe</code> executable file, and selecting the
<code>freedoom2.wad</code> IWAD when it asks, or running the command:
</p>

<pre class="code"><code>./gzdoom -iwad freedoom2.wad -file &lt;PATH-TO-PROJECT-FOLDER&gt;/my_first_mod.zip
</code></pre>

<p>
Once you launch the game, you should be greeted to this view:
</p>


<figure id="orgd078d2c">
<img src="./images/screenshot03.jpg" alt="screenshot03.jpg" width="800px">

<figcaption><span class="figure-number">Figure 4: </span>Opening area of MAP01 in Freedoom 2 (v0.13.0) with a texture replaced</figcaption>
</figure>
</section>

<div id="outline-container-org22a1972" class="outline-4">
<h4 id="org22a1972">Analysis</h4>
<section><p>
Let us unpack what is happening here. You ran GZDoom with two files:
<code>freedoom2.wad</code> and <code>my_first_mod.zip</code>. The first one is the IWAD,
meaning the file that contains the base game. The second one is what
is called a PWAD (short for <a href="https://zdoom.org/wiki/PWAD">patch WAD</a>). The IWAD contained a texture
lump (will explain later) named <code>AQRUST08</code>, and a map lump (among
others) named <code>MAP01</code>, and instructions inside the map lump for the
engine to paint that texture on a specific bunch of walls (with some
offsets, lighting effects, etc.). This is what happens when you run
GZDoom with just the IWAD <code>freedoom2.wad</code> by itself. But when you run
the IWAD with this PWAD, which contains its own copy of the <code>AQRUST08</code>
texture (we&rsquo;ll get into how I knew that later), the engine replaces
all instances of that texture with the one from your PWAD. <b>This is
also why it was important to name the file exactly right.</b> If you load
two PWADs that both replace the same texture like so:
</p>

<pre class="code"><code>./gzdoom -iwad freedoom2.wad -file mod1.pk3 -file mod2.pk3
</code></pre>

<p>
then the replacement texture from the last PWAD (<code>mod2.pk3</code>) will be
used. Think of it like the replacement instructions are executed
serially, in the sequence of the files.
</p>
</section>
</div>

<div id="outline-container-org57dbd26" class="outline-4">
<h4 id="org57dbd26">Get setup with a Launcher before proceeding further</h4>
<section><p>
This is one reason I illustrated the command line method of launching
GZDoom. Selecting multiple mod files and dragging-and-dropping them
onto the GZDoom executable does not give you control over the mod load
order. People routinely play games on GZDoom with 5-15 mods loaded at
once, often in a specific order. Don&rsquo;t worry. No one is actually
typing out long commands. They are using launcher programs like <a href="https://zdoom.org/wiki/ZDL">ZDL</a> or
<a href="https://github.com/Youda008/DoomRunner/releases/">DoomRunner</a>. I myself am partial to DoomRunner. Pick one and stick to
it.
</p>

<p>
Most launcher programs allow saving of presets for various mod and
order combinations. On first launch, they typically ask you to select
engine executables, a list of IWADs, and the usual location for
various kinds of PWADs like map packs. So you don&rsquo;t have to put files
in your GZDoom folder, or any other specific location. You should feel
free to organize your files on your computer any way you see fit. Here
is a view of my DoomRunner front page:
</p>


<figure id="orgb34d405">
<img src="./images/doomrunner01.jpg" alt="doomrunner01.jpg" width="800px">

</figure>

<p>
As you can see, I have highlighted a preset that I have named
&ldquo;<code>Elementalism</code>&rdquo; that is using the GZDoom executable, the <code>doom2.wad</code>
IWAD file, and a whole bunch of PWADs in a particular
order. <a href="https://www.moddb.com/mods/elementalism"><code>Elementalism</code></a> is an ambitious map pack, and <a href="https://xxheavy-swagxx.itch.io/hellrider-vengeful"><code>Hellrider
Vengeful</code></a> is a weapons and player-movement mod. Here, I am adding a
mod called <a href="https://forum.zdoom.org/viewtopic.php?t=75585"><code>Flashlight++</code></a> even though <code>Hellrider</code> already comes with a
flashlight, because the maps in <code>Elementalism</code> have all been
programmed to strip the player of all inventory items and pistol-start
every level. And the flashlight in <code>Flashlight++</code> happens to be
unclearable using that method. If I were to try and and another mod
that modifies weapons, like <a href="https://github.com/jekyllgrim/Beautiful-Doom/releases"><code>Beautiful Doom</code></a> to this list, then the
conflict with <code>Hellrider</code> will cause all weapons to be replaced by one
mod and ammunition pickups be of the other. So not all mods are
designed to go together. I mostly ignore DoomRunner&rsquo;s separate map
pack subwindow and load map-pack mods as regular mods, with full
control over load order.
</p>

<p>
For the rest of this guide, I recommend picking a launcher program and
launching GZDoom with <code>my_first_mod.zip</code> and <code>freedoom2.wad</code> just to
develop good habits. Under the hood, all these Lauchers are just
constructing and executing lengthy commands like the ones above.
</p>


<figure id="org96777d4">
<img src="./images/doomrunner02.jpg" alt="doomrunner02.jpg" width="800px">

</figure>

<p>
And yes, you can rename your mod <code>my_first_mod.pk3</code> if you want. The
file extension doesn&rsquo;t matter, and only exists to help you. Modern
GZDoom PWADs are named <code>*.pk3</code> and IWADs are named <code>*.ipk3</code> (we&rsquo;ll get
there). You might recall that the engine&rsquo;s internal files that came
with the GZDoom download (<code>lights.pk3</code>, <code>brightmaps.pk3</code>,
<code>game_support.pk3</code>, etc.) are also <code>*.pk3</code> files. These are the only
ones that should not be moved out of the GZDoom executable&rsquo;s folder.
</p>

<p>
Older mods, and mods made to be interoperable with source ports other
than GZDoom aren&rsquo;t zip files, but are instead of the WAD format. While
GZDoom can read WAD files (the IWAD freedoom2.wad is a WAD file, after
all), the best practice is to make mods as <code>*.pk3</code> files (which are
secretly zip files). Only levels/maps need to be in the old WAD
format. More on that later.
</p>
</section>
</div>
</div>

<div id="outline-container-orgbe957ed" class="outline-3">
<h3 id="orgbe957ed">Text files as lumps</h3>
<section><p>
Let us continue adding to your mod. So far, you have a zip file
(possibly renamed &ldquo;<code>my_first_mod.pk3</code>&rdquo;) which contains a folder named
<code>textures</code>, which in-turn contains a <code>png</code> image file named
<code>AQRUST08.png</code>. It was important for this file to be a <code>png</code> file. And
it is very important that both the folder and file names are what they
are for the mod to work. The filename had to be <code>AQRUST08</code> because
that tells the engine what texture it is meant to replace. The folder
name <code>textures</code> is a reserved name. The engine (and most map editors)
interpretes it as a location for texture files. You can put any <code>png</code>
images in them, and even organize them into subfolders within. But you
cannot put other arbitrary data in it and expect it to work. Nor can
you just put the <code>AQRUST08.png</code> file alone in a zip archive and expect
the replacement to work.
</p>

<p>
There are other reserved names, as far as files and folders in the
root (top) location of the zip archive is concerned. These reserved
names can have any capitalization. They can be camelcase, all upper
case, or lower case. It is all the same to the engine. Reserved names
for folders include &ldquo;<code>textures</code>&rdquo;, &ldquo;<code>flats</code>&rdquo;, &ldquo;<code>sprites</code>&rdquo;, &ldquo;<code>maps</code>&rdquo;,
etc. A <a href="https://zdoom.org/wiki/Using_ZIPs_as_WAD_replacement#How_to">full list</a> is on the wiki. You can have other folders and
subfolders, but these and their contents are treated by the engine in
a special way. Reserved names for files include <a href="https://zdoom.org/wiki/TEXTURES"><code>TEXTURES</code></a>, <a href="https://zdoom.org/wiki/ZScript#Load_order"><code>ZSCRIPT</code></a>,
<a href="https://zdoom.org/wiki/MAPINFO"><code>MAPINFO</code></a>, <a href="https://zdoom.org/wiki/GLDEFS"><code>GLDEFS</code></a>, etc. Again, the capitalization doesn&rsquo;t matter,
and you can give them any file extensions you want (<code>*.lmp</code>, <code>*.txt</code>,
<code>*.zsc</code>). You can store other files in the root location of your mod
(like a lincense file, a readme, or a credits file if you end up using
other people&rsquo;s work), but they cannot use these reserved names.
</p>

<p>
Files in <code>*.pk3</code> archives may be referred to as lumps as a holdover
from the wad-format days. The wad-format is also a sort of archive
format like <code>zip</code>. Contiguous sequence of bits inside a wad-file
(often marked with a <code>start</code> and <code>end</code> markers) represent specific
types of data. We can explore this later, but we don&rsquo;t have to worry
about that as long as we have subfolders and reserved names. These
special lumps are often just text files that have their own format for
presenting data to the engine. Let us try and use one to get a better
feel.
</p>

<p>
For this next exercise, we will replace the texture on the door
visible from the starting area in Freedoom 2. The lump name for this
texture needs to be <code>BIGDOOR1</code> (again, I&rsquo;ll get to how I know this
later). But we will not just be using a file named <code>BIGDOOR1.png</code> in
the <code>textures</code> folder, even though that will work. We will instead use
use some other file name, and try to use the <code>TEXTURES</code> lump to make
it work.
</p>

<p>
Pick any <code>png</code> image file you want. I&rsquo;m going with <a href="https://en.wikipedia.org/wiki/John_Romero">John Romero&rsquo;s</a>
forehead. Crop/scale the image using some image manipulation program
like GIMP, Photoshop, or even MSPaint, to fit into 128 \(\times\) 96 pixels to
match the door&rsquo;s texture size. I named my file <code>John_Romero.png</code>, and
I placed it inside a subfolder inside the <code>textures</code> folder called
<code>custom</code>. Then, open a text file in the project root location called
<code>TEXTURES.lmp</code>. Put the following lines into it (replace the path and
file name to match your new image):
</p>

<pre class="code"><code>Texture BIGDOOR1, 128, 96
{
   Patch "textures/custom/John_Romero.png", 0, 0
}
</code></pre>

<p>
Now re-compress the zip archive with these two new files and the new subfolder.
</p>

<pre class="code"><code>zip -r my_first_mod.zip textures/ TEXTURES.lmp
</code></pre>

<p>
The archive&rsquo;s internal structure should look something like this:
</p>


<figure id="org1f86978">
<img src="./images/filestructure01.jpg" alt="filestructure01.jpg">

</figure>

<p>
Now, running the PWAD with the <code>freedoom2.wad</code> IWAD (through a
launcher like DoomRunner) should bring up this view:
</p>


<figure id="org1d152d4">
<img src="./images/screenshot06.jpg" alt="screenshot06.jpg" width="800px">

</figure>

<p>
What the <code>TEXTURES.lmp</code> file (or the <code>TEXTURES</code> lump) did was create a
new, virtual texture container with the name <code>BIGDOOR1</code> with the image
<code>John_Romer.png</code> patched in, and presented that to the engine. You can
create new virtual textures this way by combining and mashing multiple
other textures together (yes, even other virtual ones). You can scale,
rotate, skew, mirror/flip, and mask, as well as do other kinds of
transformations without actually creating new image files to be stored
in the PWAD. The <code>TEXTURES</code> lump is a great way to put a decorative
poster or graffiti onto an existing wall texture. An example we will
go through later will involve slapping an interactable switch onto a
wall texture for use in a custom map.
</p>

<p>
These lump names, you will notice, have both been eight characters
long (<code>AQRUST08</code>, <code>BIGDOOR1</code>). This is another hold-over from the DOS
days, where file names would be truncated to height characters. The
case doesn&rsquo;t matter, but you have to stick to this convention while
naming lumps. Later on when we get into map making, you will find that
certain map formats allow for use of full texture filenames with full
paths instead of these short lump names. It is still recommended that
you use these lump names instead. Because this makes your maps easily
moddable (by you as well as others!) if the lump names are
standardized.
</p>
</section>
</div>

<div id="outline-container-org1e33095" class="outline-3">
<h3 id="org1e33095">Basics of SLADE</h3>
<section><p>
Next, we will introduce another helpful program to our modding
toolbelt. This one is a WAD-editor called SLADE. You can acquire it
for your preferred OS from <a href="https://github.com/sirjuddington/SLADE/releases">here</a> or <a href="https://slade.mancubus.net/index.php?page=downloads">here</a>. SLADE is in principle capable
of many things. You can write code, compile code, paint textures,
create and modify brightmaps, and even <a href="https://eev.ee/blog/2015/12/19/you-should-make-a-doom-level-part-1/">make/edit levels</a>. There are
Doom mod authors who develop entirely on SLADE (some of them
livestream the process). But in this guide, as a rule, we will only be
using SLADE to take a peek into WADs, and possibly extract content. We
will not be using SLADE to modify any data within wads. Feel free to
learn its intricacies on your own, later.
</p>

<p>
To not overwhelm ourselves, let us first use SLADE to open the
simplest mod we have: &ldquo;<code>my_first_mod.zip</code>&rdquo; (or <code>.pk3</code>). Here is the
view you should be presented with:
</p>


<figure id="orgb8dcf9d">
<img src="./images/SLADE01.jpg" alt="SLADE01.jpg" width="800px">

</figure>

<p>
It&rsquo;s all fairly intuitive. There is a panel that shows the files or
&ldquo;lumps&rdquo; in your &ldquo;WAD&rdquo; (I&rsquo;ve expanded the folders and subfolders), and
a bigger panel to the right that shows the content of the currently
selected lump. In the image, I have selected the <code>TEXTURES.lmp</code>
file/lump to show its textual content. A few things of note here is
the SLADE as correctly identified the file-types of our lumps as two
<code>PNG</code> Graphic files and a &ldquo;Texture Definition&rdquo; lump. It says so next
to the file as well as in the bottom bar of the window. Furthermore,
it has auto-selected the &ldquo;ZDoom Textures&rdquo; option in the &ldquo;Text
Language&rdquo; pulldown menu above the textual-content panel for syntax
highlighting. All of these areas of the SLADE window are important to
us. You can select the <code>AQRUST08.png</code> file and watch the image
displayed in the content panel, along with graphic in the bottom bar.
</p>

<p>
Now let&rsquo;s open a bigger &ldquo;WAD&rdquo; file: <code>freedoom2.wad</code>. Be sure to create
a backup of this file before opening it in SLADE, just to avoid
accidentally causing a change in it. That would violate our rule
regarding SLADE for this guide.
</p>

<p>
Since this is a wad-format file, you should be confronted with a
lengthy, flat list of lumps with no hierarchical subfolder
structure. The lumps are by default, ordered in the way they are
stored in the wad (the ordering is important in the wad format). But
you can click on the &ldquo;Name&rdquo; tab at the top of the lumps panel to
display the lumps in ascending order of their name strings. If you
scroll down to Freedoom 2&rsquo;s version of the <code>AQRUST08</code> graphic (the one
your mod replaced), you will see that the &ldquo;Type&rdquo; field says &ldquo;Graphic
(Doom)&rdquo; instead of &ldquo;Graphic (PNG)&rdquo;. The image is stored in a Paletted
raw format. If the image appears in black-and-white in the contents
panel, you can instruct SLADE to use Doom&rsquo;s color palette in the
drop-down menu to the top-right. The same goes for exporting
graphics. You can&rsquo;t just right-click on the <code>AQRUST08</code> lump and click
export, as it will result in a binary lump file. You would have to
navigate to the sub-popup menu under &ldquo;Graphic&rdquo; after you right-click,
and select the &ldquo;Export as PNG&rdquo; option. If you&rsquo;d like to practice
further, try exporting the <code>SLIME14</code> graphic as a <code>PNG</code> file and
modify it, then include it in <code>my_first_mod.zip</code>. This should apply to
the floor in the opening area of Freedoom 2.
</p>

<p>
Another curiosity that should be of interest is that there is no lump
named <code>BIGDOOR1</code> (at least as of Freedoom 2 version 0.13.0). There is
one called <code>DOOR2_1</code> that looks suspiciously like the door from the
opening level, but it is too small (96 \(\times\) 96 pixels, see the bottom
bar). You can test that it isn&rsquo;t the right one by attempting a
<code>DOOR2_1</code> lump replacement file in your mod. If will replace all
instances of <code>DOOR2_1</code> usage in the levels of Freedoom 2, but all
<code>BIGDOOR1</code> instances (including the one in the opening area) will
remain unaffected.
</p>

<p>
Freedoom 2 is actually defining the <code>BIGDOOR1</code> lump inside its
<code>TEXTURE1</code> lump. You can scroll to it and highlight it with a
click. This is stored in the older wad-centric format here and not as
a text file (unlike in <code>my_first_mod.zip</code>). Which is why the &ldquo;Type&rdquo;
field says &ldquo;TEXTUREx&rdquo;. But SLADE lets you edit it if you click on the
&ldquo;Edit Textures&rdquo; button that should have appeared in the content
panel. Clicking on it should open this lump in its own tab and present
you with a list of virtual textures defined within.
</p>


<figure id="org75b62f1">
<img src="./images/SLADE02.jpg" alt="SLADE02.jpg" width="800px">

</figure>

<p>
Scrolling this list and highlighting <code>BIGDOOR1</code> should reveal to you
(in a &ldquo;Patches&rdquo; panel to the right) the five patches used to make this
lump. There&rsquo;s four copies of the <code>W13_1</code> patch with the corresponding
offsets forming a background canvas of size 128 \(\times\) 96 pixels, and one
instance of <code>DOOR2_1</code> patch slapped on top at the center. You can look
at the <code>W13_1</code> graphic lump by tabbing back to the <code>freedoom2.wad</code>
tab. If you&rsquo;ve been following this guide in detail, you get exactly
what is going on here.
</p>
</section>
</div>

<div id="outline-container-org5493de0" class="outline-3">
<h3 id="org5493de0">Sprite replacement and offsets</h3>
<section><p>
So far, we have made basic replacements for textures. Next, let us
replace some sprites. You would think that this is more of the same,
but there is a subtletly that lets us learn a couple of new
concepts. Get back into the game Freedoom 2, and turn left in the
starting area. You should see two health-pickup items called
&ldquo;<a href="https://zdoom.org/wiki/Classes:Stimpack"><code>stimpacks</code></a>&rdquo;. I have circled them in green in the following
screenshot image:
</p>


<figure id="orgea9414b">
<img src="./images/screenshot04.jpg" alt="screenshot04.jpg" width="800px">

</figure>

<p>
These are a pickup item that can restore up to 10 points of
health. They can be picked up by walking over them. But your health
(indicated in the HUD below) needs to be less than 100 points for a
successful pickup. You can lose some health points by going forward in
the corridor and deliberately getting shot at by the two enemy zombies
in the cubby-room to the left of the door. Returning tothe <code>stimpacks</code>
and walking over them should restore up to 10 points. Just walking
around the <code>stimpacks</code>, you will notice that they are depicted on
screen by a single sprite/image that always faces your viewpoint
(meaning you can never see &ldquo;behind&rdquo; the sprite by walking around it).
</p>

<p>
The sprite used by this object (the technical term is <code>actor</code>) is a
lump called <code>STIMA0</code>. You can find it inside <code>freedoom2.wad</code> via
SLADE. You would have to right-click and use the &ldquo;Graphics&rdquo; sub-menu
popup and &ldquo;Export as PNG&rdquo; if you want it as an image. To replace the
<code>STIMA0</code> sprite with one of your own in <code>my_first_mid.zip</code>, you will
have to create one of the reserved-name folders called <code>sprites</code> and
place your image with the name <code>STIMA0.png</code> inside it, and then make
sure to zip it with the others. If you are having trouble
finding/deciding on a replacement sprite, you can try this red-colored
version. Just right-click and save the png image inside the <code>sprites</code>
folder of your mod.
</p>


<figure id="org02a083d">
<img src="./images/STIMA0.png" alt="STIMA0.png" width="100px">

</figure>

<pre class="code"><code>zip -r my_first_mod.zip textures/ TEXTURES.lmp sprites/
</code></pre>

<p>
If you are using some other image, you can try and match the original
lump&rsquo;s size, which was 19 \(\times\) 10 pixels (check this in the bottom
bar inside the contents panel in SLADE). But you don&rsquo;t have to match
it. So now the file structure inside of <code>my_first_mod.zip</code> should look
like this:
</p>


<figure id="orge826f66">
<img src="./images/filestructure02.jpg" alt="filestructure02.jpg">

</figure>

<p>
If you start the game now, and turn left at the starting area, you
will be surprised to find &#x2026; nothing! But the two <code>stimpack</code> actors
are actually there. You can confirm this by losing some health (get
shot at) and running back here to &ldquo;pick&rdquo; them up. However, you can&rsquo;t
see the new sprites. In truth, they are below the floor. By default,
sprites in GZDoom are offset relative to the top-left corner of the
image file. You can add the correct offsets to <code>PNG</code> files using SLADE
(they get stored in the <code>PNG</code> format&rsquo;s <a href="https://zdoom.org/wiki/GrAb"><code>grAb</code></a> chunk) but we won&rsquo;t do
that. For one, it violates our rule about not using SLADE to modify
things. And secondly, it would have to be redone everytime you replace
or modify the image file using some other third-party program. It
might not seem like much for a single sprite, but once you have
hundreds &#x2026;
</p>

<p>
Let&rsquo;s instead use our already existing <code>TEXTURES.lmp</code> file. Add the
following lines to it (i.e. append below the existing lines), and
then re-zip the archive:
</p>

<pre class="code"><code>Sprite STIMA0, 19, 10
{
    Patch "sprites/STIMA0.png", 0, 0
    Offset 10, 10
}
</code></pre>

<p>
Note the new <code>Offset</code> field here. Change the numbers (as well as the
overall size numbers) according to your choice of image. There is also
a <code>Scale</code> field that you could use if your image is much larger than
19 \(\times\) 10 pixels. The <code>TEXTURES</code> lump uses inverse scale (2 = 50%
of the original size, 0.5 = 200% of the original size, etc.). With the
offset specified in the <code>TEXTURES.lmp</code> file, now you can modify the
<code>PNG</code> file as much as you want without worrying about preserving or
resetting the offsets within that file. The sprite replacement should
work in the game now.
</p>
</section>
</div>
</div>

<div id="outline-container-orgaf2e5ea" class="outline-2">
<h2 id="orgaf2e5ea">Zscript class replacements</h2>
<div class="outline-text-2" id="text-orgaf2e5ea">
</div>
<div id="outline-container-org101e012" class="outline-3">
<h3 id="org101e012">New pickup item</h3>
<section><p>
Coming soon &#x2026;
</p>
</section>
</div>

<div id="outline-container-orgf501179" class="outline-3">
<h3 id="orgf501179">Modifying Zombieman</h3>
<section><p>
Coming soon &#x2026;
</p>


<figure id="orgc592cc6">
<img src="./images/screenshot05.jpg" alt="screenshot05.jpg" width="800px">

</figure>
</section>
</div>

<div id="outline-container-org0d5e7e5" class="outline-3">
<h3 id="org0d5e7e5">Modifying weapon</h3>
<section><p>
Coming soon &#x2026;
</p>
</section>
</div>
</div>

<div id="outline-container-org175ee48" class="outline-2">
<h2 id="org175ee48">Basics of mapping</h2>
<div class="outline-text-2" id="text-org175ee48">
</div>
<div id="outline-container-org6b05684" class="outline-3">
<h3 id="org6b05684">Getting UDB</h3>
<div class="outline-text-3" id="text-org6b05684">
</div>
<div id="outline-container-orgd2bf2f0" class="outline-4">
<h4 id="orgd2bf2f0">Your first room</h4>
</div>
<div id="outline-container-orgcd4a6f1" class="outline-4">
<h4 id="orgcd4a6f1">Using custom textures from your mod</h4>
</div>
<div id="outline-container-org8d2024b" class="outline-4">
<h4 id="org8d2024b">Placing custom things from your mod</h4>
</div>
</div>

<div id="outline-container-orgc4274f4" class="outline-3">
<h3 id="orgc4274f4">The Mapfile lump</h3>
<section><p>
Coming soon &#x2026;
</p>
</section>

<div id="outline-container-org0900092" class="outline-4">
<h4 id="org0900092">Changing name for freedoom1</h4>
</div>
<div id="outline-container-org900eac6" class="outline-4">
<h4 id="org900eac6">MAPINFO lump</h4>
</div>
<div id="outline-container-orgdf132ef" class="outline-4">
<h4 id="orgdf132ef">Packing the map with your mod</h4>
</div>
</div>
</div>

<div id="outline-container-org76b2151" class="outline-2">
<h2 id="org76b2151">Misc.</h2>
<div class="outline-text-2" id="text-org76b2151">
</div>
<div id="outline-container-orge8f5102" class="outline-3">
<h3 id="orge8f5102">Git and version control</h3>
<section><p>
Coming soon &#x2026;
</p>
</section>
</div>

<div id="outline-container-orgc5a1c0e" class="outline-3">
<h3 id="orgc5a1c0e">Seeking help and forum/discord etiquette</h3>
<section><p>
Coming soon &#x2026;
</p>
</section>
</div>

<div id="outline-container-org1c0f69b" class="outline-3">
<h3 id="org1c0f69b">Studying famous mods</h3>
<section><p>
Coming soon &#x2026;
</p>
</section>
</div>
</div>
</article></div></div></div>
   </body>
</html>
